<html>

<head>
    <link rel="icon" href="data:,">
    <meta charset="utf-8" />



    <script src="https://unpkg.com/pdf-lib"></script>
    <title></title>
</head>

<body>

    <fieldset>
        <script>
            async function step2_loadPdf(url) {
                try {
                    const existingPdfBytes = await fetch(url).then(res => res.arrayBuffer())
                    const pdfDoc = await PDFLib.PDFDocument.load(existingPdfBytes);
                    //const pages = pdfDoc.getPages()
                    const pdfBytes = pdfDoc.save()
                    return pdfBytes
                } catch (boom) {
                    alert("FAILBOT! " + boom)
                }
            };

            const step3_renderPdf = (pdfBytes) => {
                const blob = new Blob([pdfBytes], { type: 'application/pdf' })
                const blobUrl = URL.createObjectURL(blob)
                document.getElementById("iframe").src = blobUrl;

            }

            const step1_loadPdf = () => {
                const url = "http://localhost:3030/get_retrievePdf"
                step2_loadPdf(url).then(pdfBytes => step3_renderPdf(pdfBytes))
            }
        </script>
        <button onClick="step1_loadPdf()">step1_loadPdf()</button>


    </fieldset>
    <iframe id="iframe"></iframe>

</body>

</html>